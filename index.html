<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Ragdoll Rigging: Dump Bone Names</title>

  <!-- import map for Three.js -->
  <script type="importmap">
  {
    "imports": {
      "three":   "https://unpkg.com/three@0.150.1/build/three.module.js",
      "three/":  "https://unpkg.com/three@0.150.1/"
    }
  }
  </script>

  <link rel="icon" href="data:,">
  <style>
    body { margin:0; overflow:hidden; }
    #info {
      position:absolute; top:8px; left:8px;
      background:rgba(0,0,0,0.6); color:#fff;
      padding:4px 8px; font-family:sans-serif; font-size:13px;
      z-index:10;
    }
  </style>
</head>
<body>
  <div id="info">Loading model… check console for bones</div>

  <script type="module">
    import * as THREE     from 'three';
    import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';
    import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';

    // basic scene
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x222222);
    const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 100);
    camera.position.set(0,3,5);
    const renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(innerWidth, innerHeight);
    document.body.appendChild(renderer.domElement);
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.target.set(0,1,0);
    controls.update();

    // lights + helpers
    scene.add(new THREE.HemisphereLight(0xffffff,0x444444,1));
    const dl = new THREE.DirectionalLight(0xffffff,0.8);
    dl.position.set(5,10,7.5);
    scene.add(dl, new THREE.AmbientLight(0xffffff,0.5));
    scene.add(new THREE.GridHelper(10,10), new THREE.AxesHelper(1));

    const loader = new GLTFLoader();
    loader.load(
      './models/model.gltf',
      gltf => {
        document.getElementById('info').textContent = 'Model loaded. Bone list below:';

        const model = gltf.scene;
        model.scale.set(0.25,0.25,0.25);
        scene.add(model);

        // find the SkinnedMesh
        let skinned = null;
        model.traverse(o => o.isSkinnedMesh && (skinned = o));
        if (!skinned) {
          console.error('No SkinnedMesh found in this model.');
          document.getElementById('info').textContent = '⚠️ No rigged mesh!';
          return;
        }

        // dump all bone names with index
        console.log('--- BONE LIST ---');
        skinned.skeleton.bones.forEach((b,i) => {
          console.log(`${i}: "${b.name}"`);
        });
        console.log('-----------------');

        document.getElementById('info').textContent += ' See console.';
      },
      xhr => {
        const pct = xhr.total ? (xhr.loaded/xhr.total*100).toFixed(0) : '?';
        document.getElementById('info').textContent = `Loading… ${pct}%`;
      },
      err => {
        console.error(err);
        document.getElementById('info').textContent = '❌ Error loading model.';
      }
    );

    // render loop
    (function animate() {
      requestAnimationFrame(animate);
      renderer.render(scene, camera);
    })();

    window.addEventListener('resize', () => {
      camera.aspect = innerWidth/innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(innerWidth, innerHeight);
    });
  </script>
</body>
</html>
